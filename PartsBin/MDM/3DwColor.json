{"id":0,"registry":{"0":{"submorphs":[{"__isSmartRef__":true,"id":1},{"__isSmartRef__":true,"id":41},{"__isSmartRef__":true,"id":326},{"__isSmartRef__":true,"id":330},{"__isSmartRef__":true,"id":334}],"scripts":[],"shape":{"__isSmartRef__":true,"id":338},"_ClipMode":"visible","derivationIds":[],"id":"C2AF6B7A-0C95-42F4-A1CE-7DEAD0B97A26","droppingEnabled":false,"halosEnabled":true,"draggingEnabled":true,"layout":{"__isSmartRef__":true,"id":339},"closeButton":{"__isSmartRef__":true,"id":8},"collapseButton":{"__isSmartRef__":true,"id":18},"menuButton":{"__isSmartRef__":true,"id":28},"__serializedExpressions__":["_Position","contentOffset"],"reframeHandle":{"__isSmartRef__":true,"id":326},"rightReframeHandle":{"__isSmartRef__":true,"id":334},"bottomReframeHandle":{"__isSmartRef__":true,"id":330},"titleBar":{"__isSmartRef__":true,"id":1},"collapsedTransform":null,"collapsedExtent":null,"expandedTransform":null,"expandedExtent":null,"ignoreEventsOnExpand":false,"_PreviousBorderWidth":0,"targetMorph":{"__isSmartRef__":true,"id":41},"eventHandler":{"__isSmartRef__":true,"id":340},"partsBinMetaInfo":{"__isSmartRef__":true,"id":295},"name":"3DwColor","_StyleClassNames":["Morph","Window"],"_Scale":1,"showsHalos":false,"__LivelyClassName__":"lively.morphic.Window","__SourceModuleName__":"Global.lively.morphic.Widgets","withoutLayers":["Global.lively.morphic.GrabbingLayer"],"_Position":"lively.pt(0.0,0.0)","contentOffset":"lively.pt(3.0,22.0)"},"1":{"submorphs":[{"__isSmartRef__":true,"id":2},{"__isSmartRef__":true,"id":8},{"__isSmartRef__":true,"id":18},{"__isSmartRef__":true,"id":28}],"scripts":[],"shape":{"__isSmartRef__":true,"id":38},"_ClipMode":"visible","derivationIds":[],"id":"5536B78D-8DA2-4374-BEB3-B7C251B030F7","droppingEnabled":false,"halosEnabled":true,"layout":{"__isSmartRef__":true,"id":39},"__serializedExpressions__":["_Position"],"windowMorph":{"__isSmartRef__":true,"id":0},"buttons":[{"__isSmartRef__":true,"id":8},{"__isSmartRef__":true,"id":18},{"__isSmartRef__":true,"id":28}],"label":{"__isSmartRef__":true,"id":2},"_PreviousBorderWidth":0,"owner":{"__isSmartRef__":true,"id":0},"eventHandler":{"__isSmartRef__":true,"id":40},"showsHalos":false,"__LivelyClassName__":"lively.morphic.TitleBar","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(0.0,0.0)"},"2":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":3},"_WhiteSpaceHandling":"pre","textChunks":[{"__isSmartRef__":true,"id":4}],"_ClipMode":"hidden","derivationIds":[],"id":"6D5BBE3D-840D-4AA2-BE50-179D9945ED73","_InputAllowed":false,"_HandStyle":"default","allowInput":false,"_IsSelectable":false,"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"draggingEnabled":true,"fixedWidth":true,"fixedHeight":true,"_FontFamily":"Helvetica","_FontSize":10,"__serializedExpressions__":["_TextColor","_Position"],"evalEnabled":false,"isLabel":true,"eventsAreIgnored":true,"layout":{"__isSmartRef__":true,"id":6},"owner":{"__isSmartRef__":true,"id":1},"_StyleClassNames":["Morph","Text","window-title"],"_TextStylingMode":true,"eventHandler":{"__isSmartRef__":true,"id":7},"showsHalos":false,"__LivelyClassName__":"lively.morphic.Text","__SourceModuleName__":"Global.lively.morphic.TextCore","_TextColor":"Color.rgb(64,64,64)","_Position":"lively.pt(3.0,3.0)"},"3":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":0,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(121.0,16.0)","_Padding":"lively.rect(0,0,0,0)","_BorderColor":"Color.rgb(0,0,0)"},"4":{"style":{"__isSmartRef__":true,"id":5},"chunkOwner":{"__isSmartRef__":true,"id":2},"_id":"_940","storedString":"Rectangle","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"5":{"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore"},"6":{"resizeWidth":true},"7":{"morph":{"__isSmartRef__":true,"id":2},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"8":{"submorphs":[{"__isSmartRef__":true,"id":9}],"scripts":[],"shape":{"__isSmartRef__":true,"id":14},"_ClipMode":"visible","derivationIds":[],"id":"CF828B08-5133-4F7E-82FD-F82107A82821","grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"accessibleInInactiveWindow":true,"__serializedExpressions__":["_Position"],"value":false,"toggle":false,"isActive":true,"label":{"__isSmartRef__":true,"id":9},"_PreviousBorderWidth":0,"owner":{"__isSmartRef__":true,"id":1},"_StyleClassNames":["Morph","Button","WindowControl","close"],"attributeConnections":[{"__isSmartRef__":true,"id":15}],"doNotSerialize":["$$fire"],"doNotCopyProperties":["$$fire"],"eventHandler":{"__isSmartRef__":true,"id":17},"__LivelyClassName__":"lively.morphic.WindowControl","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(193.0,3.0)"},"9":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":10},"_WhiteSpaceHandling":"pre","textChunks":[{"__isSmartRef__":true,"id":11}],"_ClipMode":"hidden","derivationIds":[],"id":"1BB27C16-3356-446F-8016-2A1E7A805879","_InputAllowed":false,"_HandStyle":"default","allowInput":false,"_IsSelectable":true,"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"draggingEnabled":true,"fixedWidth":false,"fixedHeight":false,"_FontFamily":"Helvetica","_FontSize":10,"__serializedExpressions__":["_TextColor","_Position"],"evalEnabled":false,"owner":{"__isSmartRef__":true,"id":8},"isLabel":true,"eventsAreIgnored":true,"_TextStylingMode":true,"eventsAreDisabled":true,"_PointerEvents":"none","eventHandler":{"__isSmartRef__":true,"id":13},"__LivelyClassName__":"lively.morphic.Text","__SourceModuleName__":"Global.lively.morphic.TextCore","_TextColor":"Color.rgb(64,64,64)","_Position":"lively.pt(0.0,0.0)"},"10":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":0,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(17.0,19.0)","_Padding":"lively.rect(4,2,0,0)","_BorderColor":"Color.rgb(0,0,0)"},"11":{"style":{"__isSmartRef__":true,"id":12},"chunkOwner":{"__isSmartRef__":true,"id":9},"_id":"_933","storedString":"X","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"12":{"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore"},"13":{"morph":{"__isSmartRef__":true,"id":9},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"14":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":1,"_Fill":null,"_StrokeOpacity":0,"_BorderRadius":5,"_AppearanceStylingMode":true,"_BorderStylingMode":true,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(17.0,17.0)","_Padding":"lively.rect(0,0,0,0)","_BorderColor":"Color.rgb(189,190,192)"},"15":{"sourceObj":{"__isSmartRef__":true,"id":8},"sourceAttrName":"fire","targetObj":{"__isSmartRef__":true,"id":0},"targetMethodName":"initiateShutdown","varMapping":{"__isSmartRef__":true,"id":16},"__LivelyClassName__":"AttributeConnection","__SourceModuleName__":"Global.lively.bindings.Core"},"16":{"source":{"__isSmartRef__":true,"id":8},"target":{"__isSmartRef__":true,"id":0}},"17":{"morph":{"__isSmartRef__":true,"id":8},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"18":{"submorphs":[{"__isSmartRef__":true,"id":19}],"scripts":[],"shape":{"__isSmartRef__":true,"id":24},"_ClipMode":"visible","derivationIds":[],"id":"7BB3A817-26AA-469F-A276-1B700089C335","grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"accessibleInInactiveWindow":true,"__serializedExpressions__":["_Position"],"value":false,"toggle":false,"isActive":true,"label":{"__isSmartRef__":true,"id":19},"_PreviousBorderWidth":0,"owner":{"__isSmartRef__":true,"id":1},"attributeConnections":[{"__isSmartRef__":true,"id":25}],"doNotSerialize":["$$fire"],"doNotCopyProperties":["$$fire"],"eventHandler":{"__isSmartRef__":true,"id":27},"isPressed":false,"__LivelyClassName__":"lively.morphic.WindowControl","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(173.0,3.0)"},"19":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":20},"_WhiteSpaceHandling":"pre","textChunks":[{"__isSmartRef__":true,"id":21}],"_ClipMode":"hidden","derivationIds":[],"id":"1FCEF480-1733-45A5-9E83-1DCA069B5203","_InputAllowed":false,"_HandStyle":"default","allowInput":false,"_IsSelectable":true,"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"draggingEnabled":true,"fixedWidth":false,"fixedHeight":false,"_FontFamily":"Helvetica","_FontSize":10,"__serializedExpressions__":["_TextColor","_Position"],"evalEnabled":false,"owner":{"__isSmartRef__":true,"id":18},"isLabel":true,"eventsAreIgnored":true,"_TextStylingMode":true,"eventsAreDisabled":true,"_PointerEvents":"none","eventHandler":{"__isSmartRef__":true,"id":23},"__LivelyClassName__":"lively.morphic.Text","__SourceModuleName__":"Global.lively.morphic.TextCore","_TextColor":"Color.rgb(64,64,64)","_Position":"lively.pt(0.0,0.0)"},"20":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":0,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(17.0,19.0)","_Padding":"lively.rect(4,2,0,0)","_BorderColor":"Color.rgb(0,0,0)"},"21":{"style":{"__isSmartRef__":true,"id":22},"chunkOwner":{"__isSmartRef__":true,"id":19},"_id":"_936","storedString":"â€“","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"22":{"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore"},"23":{"morph":{"__isSmartRef__":true,"id":19},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"24":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":1,"_Fill":null,"_StrokeOpacity":0,"_BorderRadius":5,"_AppearanceStylingMode":true,"_BorderStylingMode":true,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(17.0,17.0)","_Padding":"lively.rect(0,0,0,0)","_BorderColor":"Color.rgb(189,190,192)"},"25":{"sourceObj":{"__isSmartRef__":true,"id":18},"sourceAttrName":"fire","targetObj":{"__isSmartRef__":true,"id":0},"targetMethodName":"toggleCollapse","varMapping":{"__isSmartRef__":true,"id":26},"__LivelyClassName__":"AttributeConnection","__SourceModuleName__":"Global.lively.bindings.Core"},"26":{"source":{"__isSmartRef__":true,"id":18},"target":{"__isSmartRef__":true,"id":0}},"27":{"morph":{"__isSmartRef__":true,"id":18},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"28":{"submorphs":[{"__isSmartRef__":true,"id":29}],"scripts":[],"shape":{"__isSmartRef__":true,"id":34},"_ClipMode":"visible","derivationIds":[],"id":"B97E7734-3696-479F-9AAF-A9DD4D691F16","grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"accessibleInInactiveWindow":true,"__serializedExpressions__":["_Position"],"value":false,"toggle":false,"isActive":true,"label":{"__isSmartRef__":true,"id":29},"_PreviousBorderWidth":0,"owner":{"__isSmartRef__":true,"id":1},"attributeConnections":[{"__isSmartRef__":true,"id":35}],"doNotSerialize":["$$fire"],"doNotCopyProperties":["$$fire"],"eventHandler":{"__isSmartRef__":true,"id":37},"isPressed":false,"_StyleClassNames":["Morph","Button","WindowControl"],"__LivelyClassName__":"lively.morphic.WindowControl","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(130.0,3.0)"},"29":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":30},"_WhiteSpaceHandling":"pre","textChunks":[{"__isSmartRef__":true,"id":31}],"_ClipMode":"hidden","derivationIds":[],"id":"EF56F852-EE1B-4894-923C-DEA3BF14BFBA","_InputAllowed":false,"_HandStyle":"default","allowInput":false,"_IsSelectable":true,"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"draggingEnabled":true,"fixedWidth":false,"fixedHeight":false,"_FontFamily":"Helvetica","_FontSize":10,"__serializedExpressions__":["_TextColor","_Position"],"evalEnabled":false,"owner":{"__isSmartRef__":true,"id":28},"isLabel":true,"eventsAreIgnored":true,"_TextStylingMode":true,"eventsAreDisabled":true,"_PointerEvents":"none","eventHandler":{"__isSmartRef__":true,"id":33},"__LivelyClassName__":"lively.morphic.Text","__SourceModuleName__":"Global.lively.morphic.TextCore","_TextColor":"Color.rgb(64,64,64)","_Position":"lively.pt(0.0,0.0)"},"30":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":0,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(40.0,17.0)","_Padding":"lively.rect(4,2,0,0)","_BorderColor":"Color.rgb(0,0,0)"},"31":{"style":{"__isSmartRef__":true,"id":32},"chunkOwner":{"__isSmartRef__":true,"id":29},"_id":"_939","storedString":"Menu","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"32":{"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore"},"33":{"morph":{"__isSmartRef__":true,"id":29},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"34":{"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"_BorderWidth":1,"_Fill":null,"_StrokeOpacity":0,"_BorderRadius":5,"_AppearanceStylingMode":true,"_BorderStylingMode":true,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(40.0,17.0)","_Padding":"lively.rect(0,0,0,0)","_BorderColor":"Color.rgb(189,190,192)"},"35":{"sourceObj":{"__isSmartRef__":true,"id":28},"sourceAttrName":"fire","targetObj":{"__isSmartRef__":true,"id":0},"targetMethodName":"showTargetMorphMenu","varMapping":{"__isSmartRef__":true,"id":36},"__LivelyClassName__":"AttributeConnection","__SourceModuleName__":"Global.lively.bindings.Core"},"36":{"source":{"__isSmartRef__":true,"id":28},"target":{"__isSmartRef__":true,"id":0}},"37":{"morph":{"__isSmartRef__":true,"id":28},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"38":{"__serializedExpressions__":["_Position","_Extent","_Padding"],"_BorderWidth":0,"_BorderColor":null,"_Fill":null,"_AppearanceStylingMode":true,"_BorderStylingMode":true,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(213.0,22.0)","_Padding":"lively.rect(0,0,0,0)"},"39":{"resizeWidth":true,"adjustForNewBounds":true},"40":{"morph":{"__isSmartRef__":true,"id":1},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"41":{"submorphs":[{"__isSmartRef__":true,"id":42},{"__isSmartRef__":true,"id":59}],"scripts":[],"id":"21E8256B-04A1-47C2-9222-6E3C4C694EA8","shape":{"__isSmartRef__":true,"id":294},"droppingEnabled":true,"halosEnabled":true,"registeredForMouseEvents":true,"showsHalos":false,"name":"Rectangle","partsBinMetaInfo":{"__isSmartRef__":true,"id":295},"eventHandler":{"__isSmartRef__":true,"id":319},"derivationIds":[127,"F0291F62-F100-480C-AEBF-0230398F7983","AE8B5ED7-E305-45BC-BE4A-1C28A49EE12B","39BA345C-17FA-45A0-BAC2-F0CF5654ACF8","FE91EA31-D8AE-461B-8A49-95DA5FBAE5B4","F38439A3-2F4E-4AC2-BF73-2633C00B1393","6748F5B5-2284-4748-A6EE-F1A261CBAD0B","BBAFB862-93AE-4F89-BCFF-9F1C67B7FE4C","7EC17E78-593A-4CC8-B7E3-859BCBBFE785","BD8BECDB-A9A1-4009-B433-C925F0AFCCFC","F2677A9D-5855-4DF2-B248-94545B34B762","D52188B3-7DC0-410E-96B1-50892AC00A37","F904AEB7-1E9A-4215-83A9-DC819A290018"],"partTests":{"__isSmartRef__":true,"id":320},"_ClipMode":"visible","moved":true,"__serializedExpressions__":["_Position"],"owner":{"__isSmartRef__":true,"id":0},"isBeingDragged":false,"_Rotation":0,"_Scale":1,"layout":{"__isSmartRef__":true,"id":325},"_PreviousBorderWidth":1,"__LivelyClassName__":"lively.morphic.Box","__SourceModuleName__":"Global.lively.morphic.Core","_Position":"lively.pt(3.0,22.0)"},"42":{"submorphs":[{"__isSmartRef__":true,"id":43},{"__isSmartRef__":true,"id":48}],"scripts":[],"shape":{"__isSmartRef__":true,"id":52},"_ClipMode":"visible","derivationIds":["9C960844-240C-4F14-A71A-B52820BBADB4"],"id":"6D6ECF9C-6185-47B7-8B53-DCB505C163BC","grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"_Visible":true,"colorDisplay":"<lively.morphic.Box#3B2AB...>","isPressed":false,"layout":{"__isSmartRef__":true,"id":53},"name":"StyleFillColorField1","toggle":false,"value":false,"doNotSerialize":["$$color"],"doNotCopyProperties":["$$color"],"isActive":true,"label":{"__isSmartRef__":true,"id":43},"style":{"__isSmartRef__":true,"id":54},"attributeConnections":[{"__isSmartRef__":true,"id":58}],"eventHandler":{"__isSmartRef__":true,"id":293},"showsHalos":false,"__serializedExpressions__":["_Position","color","distanceToDragEvent"],"owner":{"__isSmartRef__":true,"id":41},"_StyleClassNames":["Morph","Button","SimpleColorField","AwesomeColorField"],"_Rotation":0,"_Scale":1,"__LivelyClassName__":"lively.morphic.AwesomeColorField","__SourceModuleName__":"Global.lively.morphic.ColorChooserDraft","_Position":"lively.pt(157.0,90.0)","color":"Color.rgb(113,209,176)","distanceToDragEvent":"lively.pt(31.0,-16.0)"},"43":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":44},"_WhiteSpaceHandling":"pre","textChunks":[{"__isSmartRef__":true,"id":45}],"_ClipMode":"hidden","derivationIds":["0DB10477-3E7E-4787-A4A0-5CB9323A31D4"],"id":"A80F91C2-0C38-4D4A-8B54-772130328658","_InputAllowed":false,"_HandStyle":"default","allowInput":false,"_IsSelectable":true,"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"draggingEnabled":true,"fixedWidth":true,"fixedHeight":true,"_FontFamily":"Helvetica","_FontSize":10,"evalEnabled":false,"owner":{"__isSmartRef__":true,"id":42},"isLabel":true,"eventsAreIgnored":true,"_Align":"center","_TextStylingMode":true,"eventsAreDisabled":true,"_PointerEvents":"none","eventHandler":{"__isSmartRef__":true,"id":47},"__serializedExpressions__":["_TextColor"],"__LivelyClassName__":"lively.morphic.Text","__SourceModuleName__":"Global.lively.morphic.TextCore","_TextColor":"Color.rgb(0,0,0)"},"44":{"_BorderWidth":0,"_Fill":null,"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(40.0,30.0)","_Padding":"lively.rect(0,3,0,0)","_BorderColor":"Color.rgb(0,0,0)"},"45":{"style":{"__isSmartRef__":true,"id":46},"chunkOwner":{"__isSmartRef__":true,"id":43},"_id":"_258","storedString":"","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"46":{"__serializedExpressions__":["color"],"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore","color":"Color.rgb(0,0,0)"},"47":{"morph":{"__isSmartRef__":true,"id":43},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"48":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":49},"_ClipMode":"visible","derivationIds":["65C95B8D-7401-43C5-99B8-36EE2957006D"],"id":"4F8CC1AA-E391-46E7-8F32-2ABB90DF262F","droppingEnabled":true,"halosEnabled":false,"layout":{"__isSmartRef__":true,"id":50},"owner":{"__isSmartRef__":true,"id":42},"eventHandler":{"__isSmartRef__":true,"id":51},"__serializedExpressions__":["_Position"],"_Rotation":0,"_Scale":1,"__LivelyClassName__":"lively.morphic.Box","__SourceModuleName__":"Global.lively.morphic.Core","_Position":"lively.pt(4.0,4.0)"},"49":{"_BorderWidth":0,"_BorderRadius":3,"_BorderStyle":"solid","_Opacity":1,"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor","_Fill"],"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(32.0,22.0)","_Padding":"lively.rect(0,0,0,0)","_BorderColor":"Color.rgb(204,0,0)","_Fill":"Color.rgb(113,209,176)"},"50":{"resizeHeight":true,"resizeWidth":true},"51":{"morph":{"__isSmartRef__":true,"id":48},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"52":{"_BorderWidth":1,"_Fill":null,"_BorderRadius":5,"_BorderStyle":"solid","_Opacity":1,"__serializedExpressions__":["_Position","_Extent","_Padding","_BorderColor"],"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(40.0,30.0)","_Padding":"lively.rect(0,0,0,0)","_BorderColor":"Color.rgb(189,190,192)"},"53":{"adjustForNewBounds":true},"54":{"enableGrabbing":false,"enableDropping":false,"borderWidth":1,"borderRadius":5,"label":{"__isSmartRef__":true,"id":55},"__serializedExpressions__":["borderColor","padding"],"borderColor":"Color.rgb(189,190,192)","padding":"lively.rect(0,3,0,0)"},"55":{"borderWidth":0,"fill":null,"fontSize":10,"align":"center","fixedWidth":true,"fixedHeight":true,"clipMode":"hidden","emphasize":{"__isSmartRef__":true,"id":56},"allowInput":false,"__serializedExpressions__":["padding","textColor"],"padding":"lively.rect(0,3,0,0)","textColor":"Color.rgb(0,0,0)"},"56":{"textShadow":{"__isSmartRef__":true,"id":57}},"57":{"__serializedExpressions__":["offset","color"],"offset":"lively.pt(0.0,1.0)","color":"Color.rgb(255,255,255)"},"58":{"sourceObj":{"__isSmartRef__":true,"id":42},"sourceAttrName":"color","targetObj":{"__isSmartRef__":true,"id":59},"targetMethodName":"setColor","varMapping":{"__isSmartRef__":true,"id":292},"__LivelyClassName__":"AttributeConnection","__SourceModuleName__":"Global.lively.bindings.Core"},"59":{"shape":{"__isSmartRef__":true,"id":60},"submorphs":[],"scripts":[],"_ClipMode":"auto","derivationIds":["3ABFAB66-3E1D-4B57-B4D3-DBF0D37DCE60","D3CB6A05-D42B-419A-992D-1DDF9DDED959","034779AD-D220-487C-A85D-C8C72ED576E0","A62D47E6-D416-4F59-9C68-57A81AD83D78","4A7A9D63-639B-4502-B6AD-C65D7DEABE36","919979F9-AEA7-4741-8365-3A90CF166899","6E805C97-03E9-4799-92AB-833429CF2B8C","75E8A1AF-3D80-4481-B693-4CBE5E0467E4","E3532686-AE31-4ACA-A3EC-068A8C931B5A","484D0042-1EBA-40F7-B171-23047290E340","A6744092-041B-44D9-8D9D-D5821E249E0B","EDB31DE5-727F-4D8E-9303-03FB080DE6A3","43864F00-BF04-421C-94AC-180002F837CC","9C0DD30D-87D5-4277-8439-2350B5AE86D2","73047A58-DE6E-4DC0-AFC3-800B523478EE","5F6BCAB0-5569-4714-9602-8925985BB17D","D671F0F8-31E2-48F8-A545-035DA9552210","E0C48BBF-08B0-4D1D-B42F-7A92A67BB3F5","57849E00-AC4B-4676-8F6D-8B5C025A3578","81971AB0-2A57-4A4E-ABA7-4A87870C9624"],"id":"93569B29-B2D1-4FC1-983A-A264B1031DC8","droppingEnabled":true,"halosEnabled":true,"_StyleClassNames":["Morph","HtmlWrapperMorph","selectable"],"eventHandler":{"__isSmartRef__":true,"id":61},"showsHalos":false,"partsBinMetaInfo":{"__isSmartRef__":true,"id":62},"name":"3DCube","prevScroll":[0,0],"htmlString":"","isBeingDragged":false,"cube":{"__isSmartRef__":true,"id":84},"owner":{"__isSmartRef__":true,"id":41},"__serializedExpressions__":["_Position","distanceToDragEvent"],"_Rotation":0,"_Scale":1,"_PreviousBorderWidth":1,"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":270},"__LivelyClassName__":"lively.morphic.HtmlWrapperMorph","__SourceModuleName__":"Global.lively.morphic.AdditionalMorphs","_Position":"lively.pt(0.0,10.0)","distanceToDragEvent":"lively.pt(97.0,-10.0)"},"60":{"_BorderWidth":0,"stringifiedShapeNode":"<div xmlns=\"http://www.w3.org/1999/xhtml\" data-lively-morphid=\"93569B29-B2D1-4FC1-983A-A264B1031DC8\" class=\"Morph HtmlWrapperMorph selectable\" id=\"null\" style=\"overflow: auto; padding: 0px; width: 144px; height: 140px; position: absolute; left: 0px; top: 0px; border-width: 0px;\"><canvas width=\"146\" height=\"142\" style=\"width: 146px; height: 142px;\"></canvas></div>","_AppearanceStylingMode":true,"_BorderStylingMode":true,"__serializedExpressions__":["_Padding","_Position","_Extent","_Fill","extent"],"__LivelyClassName__":"lively.morphic.Shapes.External","__SourceModuleName__":"Global.lively.morphic.Shapes","_Padding":"lively.rect(0,0,0,0)","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(142.0,138.0)","_Fill":"Color.rgb(250,221,221)","extent":"lively.pt(144.0,140.0)"},"61":{"morph":{"__isSmartRef__":true,"id":59},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"62":{"partName":"3DCube","requiredModules":[],"partsSpaceName":"PartsBin/MDM/","comment":"A morph that renders arbitrary HTML. Makes integrations of non-morphic content straightforward. Look inside the menu to open an HTML editor or export the content as an HTML document.","changes":[{"__isSmartRef__":true,"id":63},{"__isSmartRef__":true,"id":64},{"__isSmartRef__":true,"id":65},{"__isSmartRef__":true,"id":66},{"__isSmartRef__":true,"id":67},{"__isSmartRef__":true,"id":68},{"__isSmartRef__":true,"id":69},{"__isSmartRef__":true,"id":70},{"__isSmartRef__":true,"id":71},{"__isSmartRef__":true,"id":72},{"__isSmartRef__":true,"id":73},{"__isSmartRef__":true,"id":74},{"__isSmartRef__":true,"id":75},{"__isSmartRef__":true,"id":76},{"__isSmartRef__":true,"id":77},{"__isSmartRef__":true,"id":78},{"__isSmartRef__":true,"id":79},{"__isSmartRef__":true,"id":80},{"__isSmartRef__":true,"id":81},{"__isSmartRef__":true,"id":82},{"__isSmartRef__":true,"id":83}],"migrationLevel":9,"__serializedExpressions__":["lastModifiedDate"],"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo","__SourceModuleName__":"Global.lively.PartsBin","lastModifiedDate":"new Date(\"Thu Jun 11 2015 16:55:15 GMT-0700 (PDT)\")"},"63":{"author":"robertkrahn","message":"Fixed reset as suggested by Rick. Thanks Rick!","id":"C9389773-D839-4E3C-AF10-28F6282541BB","__serializedExpressions__":["date"],"date":"new Date(\"Thu Jul 17 2014 12:02:10 GMT-0700 (PDT)\")"},"64":{"author":"robertkrahn","message":"no comment","id":"4B305BE4-1B35-4BBB-ABCE-D255D563CBD9","__serializedExpressions__":["date"],"date":"new Date(\"Wed Feb 12 2014 15:34:42 GMT-0800 (PST)\")"},"65":{"author":"robertkrahn","message":"no comment","id":"FC45EDD5-3632-41E9-8CCF-1E7BF0F5B7FA","__serializedExpressions__":["date"],"date":"new Date(\"Wed Feb 12 2014 15:35:06 GMT-0800 (PST)\")"},"66":{"author":"robertkrahn","message":"clipped","id":"D4A9A56A-16E6-4D3D-9B42-425F9CE8E8B6","__serializedExpressions__":["date"],"date":"new Date(\"Wed Feb 12 2014 16:29:30 GMT-0800 (PST)\")"},"67":{"author":"robertkrahn","message":"clipped","id":"287FA9C0-4815-46CD-B588-28102199A3F0","__serializedExpressions__":["date"],"date":"new Date(\"Wed Feb 12 2014 16:29:38 GMT-0800 (PST)\")"},"68":{"author":"rick","message":"added a few helper scripts","id":"A9AF9642-F781-4A08-A0D1-9590A65517C0","__serializedExpressions__":["date"],"date":"new Date(\"Fri Sep 05 2014 08:25:26 GMT-0700 (PDT)\")"},"69":{"author":"Alexia","message":"no comment","id":"833EAC70-998E-40D8-BAD9-9305CF312B1D","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 08 2015 16:54:49 GMT-0700 (PDT)\")"},"70":{"author":"Alexia","message":"no comment","id":"B432157F-3EC7-43E2-ADFB-19AABE46B340","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 08 2015 18:36:01 GMT-0700 (PDT)\")"},"71":{"author":"Alexia","message":"no comment","id":"DF93ED55-6519-43E7-8A41-C03C05DCBEC9","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 08 2015 22:15:26 GMT-0700 (PDT)\")"},"72":{"author":"Alexia","message":"no comment","id":"72E05D5F-6671-4A9B-A851-312EBCF2AAED","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 08 2015 22:16:32 GMT-0700 (PDT)\")"},"73":{"author":"Alexia","message":"no comment","id":"1CDA3E54-4BAA-4657-AD2A-AD08093EE031","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 08 2015 22:32:12 GMT-0700 (PDT)\")"},"74":{"author":"Alexia","message":"no comment","id":"FEDACA0B-1A1C-45A2-9373-FFAD76B2E41E","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:38:46 GMT-0700 (PDT)\")"},"75":{"author":"Alexia","message":"no comment","id":"18D3C8F0-41E0-4FCB-8F60-883BAD99B972","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:40:10 GMT-0700 (PDT)\")"},"76":{"author":"Alexia","message":"no comment","id":"D26124E0-7B6D-4304-9A1A-B34D4905A5B6","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:51:09 GMT-0700 (PDT)\")"},"77":{"author":"Alexia","message":"no comment","id":"E3F13A3E-79C7-4317-96D8-C6BE29AAD458","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:54:52 GMT-0700 (PDT)\")"},"78":{"author":"Alexia","message":"no comment","id":"9B905E74-D678-4071-AE80-563020D0C239","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:55:59 GMT-0700 (PDT)\")"},"79":{"author":"Alexia","message":"no comment","id":"61132A56-DEE5-43FA-9DF9-F9EA84D9FD2A","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:56:45 GMT-0700 (PDT)\")"},"80":{"author":"Alexia","message":"no comment","id":"5D56F793-D080-467A-9AAD-A86EA9356FC6","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:57:45 GMT-0700 (PDT)\")"},"81":{"author":"Alexia","message":"no comment","id":"2C97DD4A-779B-440A-B109-7929ABE8AE4F","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 10:58:42 GMT-0700 (PDT)\")"},"82":{"author":"Alexia","message":"no comment","id":"2A52ABC5-BBB0-4FD6-AA4A-450B7B5A4D14","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 13:11:17 GMT-0700 (PDT)\")"},"83":{"author":"Alexia","message":"no comment","id":"FDAE44E1-7EC6-486C-9210-6862BFEB780E","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 09 2015 13:46:05 GMT-0700 (PDT)\")"},"84":{"uuid":"F2F0B037-5F5E-4A00-90D1-63A1A8595F38","name":"","type":"Mesh","parent":{"__isSmartRef__":true,"id":85},"children":[],"up":{"__isSmartRef__":true,"id":96},"position":{"__isSmartRef__":true,"id":97},"rotation":{"__isSmartRef__":true,"id":98},"quaternion":{"__isSmartRef__":true,"id":99},"scale":{"__isSmartRef__":true,"id":100},"rotationAutoUpdate":true,"matrix":{"__isSmartRef__":true,"id":101},"matrixWorld":{"__isSmartRef__":true,"id":103},"matrixAutoUpdate":true,"matrixWorldNeedsUpdate":false,"visible":true,"castShadow":false,"receiveShadow":false,"frustumCulled":true,"renderOrder":0,"userData":{"__isSmartRef__":true,"id":105},"geometry":{"__isSmartRef__":true,"id":106},"material":{"__isSmartRef__":true,"id":227},"__webglInit":true,"_modelViewMatrix":{"__isSmartRef__":true,"id":265},"_normalMatrix":{"__isSmartRef__":true,"id":267},"_listeners":{"__isSmartRef__":true,"id":269},"__webglActive":true},"85":{"uuid":"F7953F24-457D-4D5D-BDCE-2987E3435224","name":"","type":"Scene","children":[{"__isSmartRef__":true,"id":84}],"up":{"__isSmartRef__":true,"id":86},"position":{"__isSmartRef__":true,"id":87},"rotation":{"__isSmartRef__":true,"id":88},"quaternion":{"__isSmartRef__":true,"id":89},"scale":{"__isSmartRef__":true,"id":90},"rotationAutoUpdate":true,"matrix":{"__isSmartRef__":true,"id":91},"matrixWorld":{"__isSmartRef__":true,"id":93},"matrixAutoUpdate":true,"matrixWorldNeedsUpdate":false,"visible":true,"castShadow":false,"receiveShadow":false,"frustumCulled":true,"renderOrder":0,"userData":{"__isSmartRef__":true,"id":95},"fog":null,"overrideMaterial":null,"autoUpdate":true},"86":{"x":0,"y":1,"z":0},"87":{"x":0,"y":0,"z":0},"88":{"_x":0,"_y":0,"_z":0,"_order":"XYZ"},"89":{"_x":0,"_y":0,"_z":0,"_w":1},"90":{"x":1,"y":1,"z":1},"91":{"elements":{"__isSmartRef__":true,"id":92}},"92":{"__TypedArrayClass__":"Float32Array","__TypedArrayData__":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},"93":{"elements":{"__isSmartRef__":true,"id":94}},"94":{"__TypedArrayClass__":"Float32Array","__TypedArrayData__":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},"95":{},"96":{"x":0,"y":1,"z":0},"97":{"x":0,"y":0,"z":0},"98":{"_x":143.49000000001448,"_y":143.49000000001448,"_z":0,"_order":"XYZ"},"99":{"_x":-0.42690536953399266,"_y":-0.42690536953399266,"_z":0.23970823012810188,"_w":0.7602917698718981},"100":{"x":1,"y":1,"z":1},"101":{"elements":{"__isSmartRef__":true,"id":102}},"102":{"__TypedArrayClass__":"Float32Array","__TypedArrayData__":[0.5205835103988647,0.728992760181427,0.4444798231124878,0,5.551115123125783e-17,0.5205835103988647,-0.853810727596283,0,-0.853810727596283,0.4444798231124878,0.2710072100162506,0,0,0,0,1]},"103":{"elements":{"__isSmartRef__":true,"id":104}},"104":{"__TypedArrayClass__":"Float32Array","__TypedArrayData__":[0.5205835103988647,0.728992760181427,0.4444798231124878,0,5.551115123125783e-17,0.5205835103988647,-0.853810727596283,0,-0.853810727596283,0.4444798231124878,0.2710072100162506,0,0,0,0,1]},"105":{},"106":{"uuid":"B48B1036-5F15-45E3-AA0A-C9026BC861B7","name":"","type":"BoxGeometry","vertices":[{"__isSmartRef__":true,"id":107},{"__isSmartRef__":true,"id":108},{"__isSmartRef__":true,"id":109},{"__isSmartRef__":true,"id":110},{"__isSmartRef__":true,"id":111},{"__isSmartRef__":true,"id":112},{"__isSmartRef__":true,"id":113},{"__isSmartRef__":true,"id":114}],"colors":[],"faces":[{"__isSmartRef__":true,"id":115},{"__isSmartRef__":true,"id":121},{"__isSmartRef__":true,"id":127},{"__isSmartRef__":true,"id":133},{"__isSmartRef__":true,"id":139},{"__isSmartRef__":true,"id":145},{"__isSmartRef__":true,"id":151},{"__isSmartRef__":true,"id":157},{"__isSmartRef__":true,"id":163},{"__isSmartRef__":true,"id":169},{"__isSmartRef__":true,"id":175},{"__isSmartRef__":true,"id":181}],"faceVertexUvs":[[[{"__isSmartRef__":true,"id":187},{"__isSmartRef__":true,"id":188},{"__isSmartRef__":true,"id":189}],[{"__isSmartRef__":true,"id":190},{"__isSmartRef__":true,"id":191},{"__isSmartRef__":true,"id":192}],[{"__isSmartRef__":true,"id":193},{"__isSmartRef__":true,"id":194},{"__isSmartRef__":true,"id":195}],[{"__isSmartRef__":true,"id":196},{"__isSmartRef__":true,"id":197},{"__isSmartRef__":true,"id":198}],[{"__isSmartRef__":true,"id":199},{"__isSmartRef__":true,"id":200},{"__isSmartRef__":true,"id":201}],[{"__isSmartRef__":true,"id":202},{"__isSmartRef__":true,"id":203},{"__isSmartRef__":true,"id":204}],[{"__isSmartRef__":true,"id":205},{"__isSmartRef__":true,"id":206},{"__isSmartRef__":true,"id":207}],[{"__isSmartRef__":true,"id":208},{"__isSmartRef__":true,"id":209},{"__isSmartRef__":true,"id":210}],[{"__isSmartRef__":true,"id":211},{"__isSmartRef__":true,"id":212},{"__isSmartRef__":true,"id":213}],[{"__isSmartRef__":true,"id":214},{"__isSmartRef__":true,"id":215},{"__isSmartRef__":true,"id":216}],[{"__isSmartRef__":true,"id":217},{"__isSmartRef__":true,"id":218},{"__isSmartRef__":true,"id":219}],[{"__isSmartRef__":true,"id":220},{"__isSmartRef__":true,"id":221},{"__isSmartRef__":true,"id":222}]]],"morphTargets":[],"morphColors":[],"morphNormals":[],"skinWeights":[],"skinIndices":[],"lineDistances":[],"boundingBox":null,"boundingSphere":{"__isSmartRef__":true,"id":223},"hasTangents":false,"dynamic":true,"verticesNeedUpdate":false,"elementsNeedUpdate":false,"uvsNeedUpdate":false,"normalsNeedUpdate":false,"tangentsNeedUpdate":false,"colorsNeedUpdate":false,"lineDistancesNeedUpdate":false,"groupsNeedUpdate":false,"parameters":{"__isSmartRef__":true,"id":225},"widthSegments":1,"heightSegments":1,"depthSegments":1,"__webglInit":true,"_listeners":{"__isSmartRef__":true,"id":226},"morphTargetsNeedUpdate":false},"107":{"x":0.5,"y":0.5,"z":0.5},"108":{"x":0.5,"y":0.5,"z":-0.5},"109":{"x":0.5,"y":-0.5,"z":0.5},"110":{"x":0.5,"y":-0.5,"z":-0.5},"111":{"x":-0.5,"y":0.5,"z":-0.5},"112":{"x":-0.5,"y":0.5,"z":0.5},"113":{"x":-0.5,"y":-0.5,"z":-0.5},"114":{"x":-0.5,"y":-0.5,"z":0.5},"115":{"a":0,"b":2,"c":1,"normal":{"__isSmartRef__":true,"id":116},"vertexNormals":[{"__isSmartRef__":true,"id":117},{"__isSmartRef__":true,"id":118},{"__isSmartRef__":true,"id":119}],"color":{"__isSmartRef__":true,"id":120},"vertexColors":[],"vertexTangents":[],"materialIndex":0},"116":{"x":1,"y":0,"z":0},"117":{"x":1,"y":0,"z":0},"118":{"x":1,"y":0,"z":0},"119":{"x":1,"y":0,"z":0},"120":{},"121":{"a":2,"b":3,"c":1,"normal":{"__isSmartRef__":true,"id":122},"vertexNormals":[{"__isSmartRef__":true,"id":123},{"__isSmartRef__":true,"id":124},{"__isSmartRef__":true,"id":125}],"color":{"__isSmartRef__":true,"id":126},"vertexColors":[],"vertexTangents":[],"materialIndex":0},"122":{"x":1,"y":0,"z":0},"123":{"x":1,"y":0,"z":0},"124":{"x":1,"y":0,"z":0},"125":{"x":1,"y":0,"z":0},"126":{},"127":{"a":4,"b":6,"c":5,"normal":{"__isSmartRef__":true,"id":128},"vertexNormals":[{"__isSmartRef__":true,"id":129},{"__isSmartRef__":true,"id":130},{"__isSmartRef__":true,"id":131}],"color":{"__isSmartRef__":true,"id":132},"vertexColors":[],"vertexTangents":[],"materialIndex":1},"128":{"x":-1,"y":0,"z":0},"129":{"x":-1,"y":0,"z":0},"130":{"x":-1,"y":0,"z":0},"131":{"x":-1,"y":0,"z":0},"132":{},"133":{"a":6,"b":7,"c":5,"normal":{"__isSmartRef__":true,"id":134},"vertexNormals":[{"__isSmartRef__":true,"id":135},{"__isSmartRef__":true,"id":136},{"__isSmartRef__":true,"id":137}],"color":{"__isSmartRef__":true,"id":138},"vertexColors":[],"vertexTangents":[],"materialIndex":1},"134":{"x":-1,"y":0,"z":0},"135":{"x":-1,"y":0,"z":0},"136":{"x":-1,"y":0,"z":0},"137":{"x":-1,"y":0,"z":0},"138":{},"139":{"a":4,"b":5,"c":1,"normal":{"__isSmartRef__":true,"id":140},"vertexNormals":[{"__isSmartRef__":true,"id":141},{"__isSmartRef__":true,"id":142},{"__isSmartRef__":true,"id":143}],"color":{"__isSmartRef__":true,"id":144},"vertexColors":[],"vertexTangents":[],"materialIndex":2},"140":{"x":0,"y":1,"z":0},"141":{"x":0,"y":1,"z":0},"142":{"x":0,"y":1,"z":0},"143":{"x":0,"y":1,"z":0},"144":{},"145":{"a":5,"b":0,"c":1,"normal":{"__isSmartRef__":true,"id":146},"vertexNormals":[{"__isSmartRef__":true,"id":147},{"__isSmartRef__":true,"id":148},{"__isSmartRef__":true,"id":149}],"color":{"__isSmartRef__":true,"id":150},"vertexColors":[],"vertexTangents":[],"materialIndex":2},"146":{"x":0,"y":1,"z":0},"147":{"x":0,"y":1,"z":0},"148":{"x":0,"y":1,"z":0},"149":{"x":0,"y":1,"z":0},"150":{},"151":{"a":7,"b":6,"c":2,"normal":{"__isSmartRef__":true,"id":152},"vertexNormals":[{"__isSmartRef__":true,"id":153},{"__isSmartRef__":true,"id":154},{"__isSmartRef__":true,"id":155}],"color":{"__isSmartRef__":true,"id":156},"vertexColors":[],"vertexTangents":[],"materialIndex":3},"152":{"x":0,"y":-1,"z":0},"153":{"x":0,"y":-1,"z":0},"154":{"x":0,"y":-1,"z":0},"155":{"x":0,"y":-1,"z":0},"156":{},"157":{"a":6,"b":3,"c":2,"normal":{"__isSmartRef__":true,"id":158},"vertexNormals":[{"__isSmartRef__":true,"id":159},{"__isSmartRef__":true,"id":160},{"__isSmartRef__":true,"id":161}],"color":{"__isSmartRef__":true,"id":162},"vertexColors":[],"vertexTangents":[],"materialIndex":3},"158":{"x":0,"y":-1,"z":0},"159":{"x":0,"y":-1,"z":0},"160":{"x":0,"y":-1,"z":0},"161":{"x":0,"y":-1,"z":0},"162":{},"163":{"a":5,"b":7,"c":0,"normal":{"__isSmartRef__":true,"id":164},"vertexNormals":[{"__isSmartRef__":true,"id":165},{"__isSmartRef__":true,"id":166},{"__isSmartRef__":true,"id":167}],"color":{"__isSmartRef__":true,"id":168},"vertexColors":[],"vertexTangents":[],"materialIndex":4},"164":{"x":0,"y":0,"z":1},"165":{"x":0,"y":0,"z":1},"166":{"x":0,"y":0,"z":1},"167":{"x":0,"y":0,"z":1},"168":{},"169":{"a":7,"b":2,"c":0,"normal":{"__isSmartRef__":true,"id":170},"vertexNormals":[{"__isSmartRef__":true,"id":171},{"__isSmartRef__":true,"id":172},{"__isSmartRef__":true,"id":173}],"color":{"__isSmartRef__":true,"id":174},"vertexColors":[],"vertexTangents":[],"materialIndex":4},"170":{"x":0,"y":0,"z":1},"171":{"x":0,"y":0,"z":1},"172":{"x":0,"y":0,"z":1},"173":{"x":0,"y":0,"z":1},"174":{},"175":{"a":1,"b":3,"c":4,"normal":{"__isSmartRef__":true,"id":176},"vertexNormals":[{"__isSmartRef__":true,"id":177},{"__isSmartRef__":true,"id":178},{"__isSmartRef__":true,"id":179}],"color":{"__isSmartRef__":true,"id":180},"vertexColors":[],"vertexTangents":[],"materialIndex":5},"176":{"x":0,"y":0,"z":-1},"177":{"x":0,"y":0,"z":-1},"178":{"x":0,"y":0,"z":-1},"179":{"x":0,"y":0,"z":-1},"180":{},"181":{"a":3,"b":6,"c":4,"normal":{"__isSmartRef__":true,"id":182},"vertexNormals":[{"__isSmartRef__":true,"id":183},{"__isSmartRef__":true,"id":184},{"__isSmartRef__":true,"id":185}],"color":{"__isSmartRef__":true,"id":186},"vertexColors":[],"vertexTangents":[],"materialIndex":5},"182":{"x":0,"y":0,"z":-1},"183":{"x":0,"y":0,"z":-1},"184":{"x":0,"y":0,"z":-1},"185":{"x":0,"y":0,"z":-1},"186":{},"187":{"x":0,"y":1},"188":{"x":0,"y":0},"189":{"x":1,"y":1},"190":{"x":0,"y":0},"191":{"x":1,"y":0},"192":{"x":1,"y":1},"193":{"x":0,"y":1},"194":{"x":0,"y":0},"195":{"x":1,"y":1},"196":{"x":0,"y":0},"197":{"x":1,"y":0},"198":{"x":1,"y":1},"199":{"x":0,"y":1},"200":{"x":0,"y":0},"201":{"x":1,"y":1},"202":{"x":0,"y":0},"203":{"x":1,"y":0},"204":{"x":1,"y":1},"205":{"x":0,"y":1},"206":{"x":0,"y":0},"207":{"x":1,"y":1},"208":{"x":0,"y":0},"209":{"x":1,"y":0},"210":{"x":1,"y":1},"211":{"x":0,"y":1},"212":{"x":0,"y":0},"213":{"x":1,"y":1},"214":{"x":0,"y":0},"215":{"x":1,"y":0},"216":{"x":1,"y":1},"217":{"x":0,"y":1},"218":{"x":0,"y":0},"219":{"x":1,"y":1},"220":{"x":0,"y":0},"221":{"x":1,"y":0},"222":{"x":1,"y":1},"223":{"center":{"__isSmartRef__":true,"id":224},"radius":0.8660254037844386},"224":{"x":0,"y":0,"z":0},"225":{"width":1,"height":1,"depth":1},"226":{"dispose":[]},"227":{"uuid":"6F020C22-8361-493A-9A69-545E003C8D92","name":"","type":"MeshBasicMaterial","side":0,"opacity":1,"transparent":false,"blending":1,"blendSrc":204,"blendDst":205,"blendEquation":100,"blendSrcAlpha":null,"blendDstAlpha":null,"blendEquationAlpha":null,"depthTest":true,"depthWrite":true,"colorWrite":true,"polygonOffset":false,"polygonOffsetFactor":0,"polygonOffsetUnits":0,"alphaTest":0,"overdraw":0,"visible":true,"_needsUpdate":false,"color":{"__isSmartRef__":true,"id":228},"map":null,"lightMap":null,"specularMap":null,"alphaMap":null,"envMap":null,"combine":0,"reflectivity":1,"refractionRatio":0.98,"fog":true,"shading":2,"wireframe":false,"wireframeLinewidth":1,"wireframeLinecap":"round","wireframeLinejoin":"round","vertexColors":0,"skinning":false,"morphTargets":false,"_listeners":{"__isSmartRef__":true,"id":229},"__webglShader":{"__isSmartRef__":true,"id":230},"program":{"__isSmartRef__":true,"id":255},"uniformsList":[[{"__isSmartRef__":true,"id":232},{"__isSmartRef__":true,"id":259}],[{"__isSmartRef__":true,"id":233},{"__isSmartRef__":true,"id":260}]]},"228":{"r":0.44313725490196076,"g":0.8196078431372549,"b":0.6901960784313725},"229":{"dispose":[]},"230":{"uniforms":{"__isSmartRef__":true,"id":231},"vertexShader":"#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n\tfloat distance = dot( planeNormal, point-pointOnPlane );\n\treturn point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\tif ( decayExponent > 0.0 ) {\n\t  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n\t}\n\treturn 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\n\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n\n#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif\nvoid main() {\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif\n#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif\n#ifdef USE_COLOR\n\n\tvColor.xyz = inputToLinear( color.xyz );\n\n#endif\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n\t#ifdef USE_ENVMAP\n#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n\n#ifdef USE_SKINNING\n\n\tvec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n\tvec3 objectNormal = morphedNormal;\n\n#else\n\n\tvec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n\n\t#endif\n#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif\n#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n\n#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n\n#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif\n#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#elif defined( USE_MORPHTARGETS )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif\n}","fragmentShader":"uniform vec3 diffuse;\nuniform float opacity;\n#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n\tfloat distance = dot( planeNormal, point-pointOnPlane );\n\treturn point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\tif ( decayExponent > 0.0 ) {\n\t  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n\t}\n\treturn 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\n\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n\n#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif\n#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\nvoid main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n\toutgoingLight = diffuseColor.rgb;\n#ifdef USE_LIGHTMAP\n\n\toutgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n\tshadowColor = inputToLinear( shadowColor );\n\n\toutgoingLight = outgoingLight * shadowColor;\n\n#endif\n\n\n\toutgoingLight = linearToOutput( outgoingLight );\n\n#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n\t\tfogFactor = whiteCompliment( fogFactor );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"},"231":{"diffuse":{"__isSmartRef__":true,"id":232},"opacity":{"__isSmartRef__":true,"id":233},"map":{"__isSmartRef__":true,"id":234},"offsetRepeat":{"__isSmartRef__":true,"id":235},"lightMap":{"__isSmartRef__":true,"id":237},"specularMap":{"__isSmartRef__":true,"id":238},"alphaMap":{"__isSmartRef__":true,"id":239},"envMap":{"__isSmartRef__":true,"id":240},"flipEnvMap":{"__isSmartRef__":true,"id":241},"reflectivity":{"__isSmartRef__":true,"id":242},"refractionRatio":{"__isSmartRef__":true,"id":243},"morphTargetInfluences":{"__isSmartRef__":true,"id":244},"fogDensity":{"__isSmartRef__":true,"id":245},"fogNear":{"__isSmartRef__":true,"id":246},"fogFar":{"__isSmartRef__":true,"id":247},"fogColor":{"__isSmartRef__":true,"id":248},"shadowMap":{"__isSmartRef__":true,"id":250},"shadowMapSize":{"__isSmartRef__":true,"id":251},"shadowBias":{"__isSmartRef__":true,"id":252},"shadowDarkness":{"__isSmartRef__":true,"id":253},"shadowMatrix":{"__isSmartRef__":true,"id":254}},"232":{"type":"c","value":{"__isSmartRef__":true,"id":228}},"233":{"type":"f","value":1},"234":{"type":"t","value":null},"235":{"type":"v4","value":{"__isSmartRef__":true,"id":236}},"236":{"x":0,"y":0,"z":1,"w":1},"237":{"type":"t","value":null},"238":{"type":"t","value":null},"239":{"type":"t","value":null},"240":{"type":"t","value":null},"241":{"type":"f","value":-1},"242":{"type":"f","value":1},"243":{"type":"f","value":0.98},"244":{"type":"f","value":0},"245":{"type":"f","value":0.00025},"246":{"type":"f","value":1},"247":{"type":"f","value":2000},"248":{"type":"c","value":{"__isSmartRef__":true,"id":249}},"249":{"r":1,"g":1,"b":1},"250":{"type":"tv","value":[]},"251":{"type":"v2v","value":[]},"252":{"type":"fv1","value":[]},"253":{"type":"fv1","value":[]},"254":{"type":"m4v","value":[]},"255":{"uniforms":{"__isSmartRef__":true,"id":256},"attributes":{"__isSmartRef__":true,"id":261},"attributesKeys":["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance","morphTarget0","morphTarget1","morphTarget2","morphTarget3","morphTarget4","morphTarget5","morphTarget6","morphTarget7","morphNormal0","morphNormal1","morphNormal2","morphNormal3"],"id":0,"code":"basic,precision,highp,supportsVertexTextures,true,map,false,envMap,false,envMapMode,,lightMap,false,bumpMap,false,normalMap,false,specularMap,false,alphaMap,false,combine,0,vertexColors,0,fog,,useFog,true,fogExp,false,flatShading,false,sizeAttenuation,,logarithmicDepthBuffer,false,skinning,false,maxBones,251,useVertexTexture,,morphTargets,false,morphNormals,,maxMorphTargets,8,maxMorphNormals,4,maxDirLights,0,maxPointLights,0,maxSpotLights,0,maxHemiLights,0,maxShadows,0,shadowMapEnabled,false,shadowMapType,1,shadowMapDebug,false,shadowMapCascade,false,alphaTest,0,metal,,wrapAround,,doubleSided,false,flipSided,false","usedTimes":1,"program":{"__isSmartRef__":true,"id":262},"vertexShader":{"__isSmartRef__":true,"id":263},"fragmentShader":{"__isSmartRef__":true,"id":264}},"256":{"viewMatrix":null,"modelViewMatrix":{"__isSmartRef__":true,"id":257},"projectionMatrix":{"__isSmartRef__":true,"id":258},"normalMatrix":null,"modelMatrix":null,"cameraPosition":null,"morphTargetInfluences":null,"bindMatrix":null,"bindMatrixInverse":null,"boneGlobalMatrices":null,"diffuse":{"__isSmartRef__":true,"id":259},"opacity":{"__isSmartRef__":true,"id":260},"map":null,"offsetRepeat":null,"lightMap":null,"specularMap":null,"alphaMap":null,"envMap":null,"flipEnvMap":null,"reflectivity":null,"refractionRatio":null,"fogDensity":null,"fogNear":null,"fogFar":null,"fogColor":null,"shadowMap":null,"shadowMapSize":null,"shadowBias":null,"shadowDarkness":null,"shadowMatrix":null},"257":{},"258":{},"259":{},"260":{},"261":{"position":0,"normal":-1,"uv":-1,"uv2":-1,"tangent":-1,"color":-1,"skinIndex":-1,"skinWeight":-1,"lineDistance":-1,"morphTarget0":-1,"morphTarget1":-1,"morphTarget2":-1,"morphTarget3":-1,"morphTarget4":-1,"morphTarget5":-1,"morphTarget6":-1,"morphTarget7":-1,"morphNormal0":-1,"morphNormal1":-1,"morphNormal2":-1,"morphNormal3":-1},"262":{},"263":{},"264":{},"265":{"elements":{"__isSmartRef__":true,"id":266}},"266":{"__TypedArrayClass__":"Float32Array","__TypedArrayData__":[0.5205835103988647,0.728992760181427,0.4444798231124878,0,5.551115123125783e-17,0.5205835103988647,-0.853810727596283,0,-0.853810727596283,0.4444798231124878,0.2710072100162506,0,0,0,-1.399999976158142,1]},"267":{"elements":{"__isSmartRef__":true,"id":268}},"268":{"__TypedArrayClass__":"Float32Array","__TypedArrayData__":[0.5205835700035095,0.7289928197860718,0.4444798231124878,1.9095296011073515e-8,0.5205835700035095,-0.8538107872009277,-0.8538107872009277,0.4444798231124878,0.2710072100162506]},"269":{"removed":[]},"270":{"setHTMLString":{"__isSmartRef__":true,"id":271},"displayHTML":{"__isSmartRef__":true,"id":274},"draw":{"__isSmartRef__":true,"id":277},"load3":{"__isSmartRef__":true,"id":280},"onLoad":{"__isSmartRef__":true,"id":283},"reset":{"__isSmartRef__":true,"id":286},"setColor":{"__isSmartRef__":true,"id":289}},"271":{"varMapping":{"__isSmartRef__":true,"id":272},"source":"function setHTMLString(htmlString) {\n    this.htmlString = htmlString;\n    this.displayHTML();\n}","funcProperties":{"__isSmartRef__":true,"id":273},"__LivelyClassName__":"lively.Closure"},"272":{"this":{"__isSmartRef__":true,"id":59}},"273":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Fri Jun 05 2015 15:30:47 GMT-0700 (PDT)\")"},"274":{"varMapping":{"__isSmartRef__":true,"id":275},"source":"function displayHTML() {\n    this.setClipMode('auto');\n    this.jQuery().html(this.htmlString);\n}","funcProperties":{"__isSmartRef__":true,"id":276},"__LivelyClassName__":"lively.Closure"},"275":{"this":{"__isSmartRef__":true,"id":59}},"276":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Mon Jun 08 2015 22:33:26 GMT-0700 (PDT)\")"},"277":{"varMapping":{"__isSmartRef__":true,"id":278},"source":"function draw() {\n    var self = this;\n    var scene = new Global.THREE.Scene();\n    var camera = new Global.THREE.PerspectiveCamera(75, this.getExtent().x / this.getExtent().y, 0.1, 1000);\n    var renderer = new Global.THREE.WebGLRenderer({ alpha: true });\n    renderer.setSize(this.getExtent().x, this.getExtent().y);\n    renderer.setClearColor(16777215, 0);\n    // Global.inspect(renderer.domElement);\n    // document.body.appendChild(renderer.domElement);\n    this.appendChild(renderer.domElement);\n    var geometry = new Global.THREE.BoxGeometry(1, 1, 1);\n    var material = new Global.THREE.MeshBasicMaterial({ color: 16711782 });\n    //==========ATTENTION!!!!=============\n    this.cube = new Global.THREE.Mesh(geometry, material);\n    scene.add(this.cube);\n    camera.position.z = 1.4;\n    var render = function render() {\n        requestAnimationFrame(render);\n        self.cube.rotation.x += 0.01;\n        self.cube.rotation.y += 0.01;\n        renderer.render(scene, camera);\n    };\n    render();\n}","funcProperties":{"__isSmartRef__":true,"id":279},"__LivelyClassName__":"lively.Closure"},"278":{"this":{"__isSmartRef__":true,"id":59}},"279":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Tue Jun 09 2015 14:16:39 GMT-0700 (PDT)\")"},"280":{"varMapping":{"__isSmartRef__":true,"id":281},"source":"function load3(loadAttemptCount, thenDo) {\n    var self = this;\n    var maxLoadAttemptCount = 5;\n    var ThreeURL = '//cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.js';\n    if (!loadAttemptCount) loadAttemptCount = 1;\n    Global.$('script[src=\"' + ThreeURL + '\"]').remove();\n    Global.JSLoader.loadJs(ThreeURL);\n    Functions.waitFor(5 * 1000, function () {\n        return typeof Global.THREE !== 'undefined';\n    }, function (err) {\n        var msg;\n        if (err && loadAttemptCount < maxLoadAttemptCount) {\n            msg = Strings.format('Loading THREE, attempt %s timed out.\\nTrying again...', loadAttemptCount);\n            $world.setStatusMessage(msg, Global.Color.yellow, 5);\n            self.load3(loadAttemptCount + 1);\n            return;\n        }\n        if (err) {\n            msg = Strings.format('Cannot load d3 library.\\nSorry, THREE isn\\'t available right now.', loadAttemptCount);\n            $world.setStatusMessage(msg, Global.Color.red, 10);\n            return;\n        }\n        msg = Strings.format('THREE loaded!', loadAttemptCount);\n        $world.setStatusMessage(msg, Global.Color.green, 4);\n        thenDo && thenDo();\n        lively.bindings.signal(this, '3Loaded');\n    });\n}","funcProperties":{"__isSmartRef__":true,"id":282},"__LivelyClassName__":"lively.Closure"},"281":{"this":{"__isSmartRef__":true,"id":59}},"282":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Mon Jun 08 2015 22:33:26 GMT-0700 (PDT)\")"},"283":{"varMapping":{"__isSmartRef__":true,"id":284},"source":"function onLoad() {\n    this.reset();\n    this.load3();\n    this.draw();\n}","funcProperties":{"__isSmartRef__":true,"id":285},"__LivelyClassName__":"lively.Closure"},"284":{"this":{"__isSmartRef__":true,"id":59}},"285":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Mon Jun 08 2015 22:15:07 GMT-0700 (PDT)\")"},"286":{"varMapping":{"__isSmartRef__":true,"id":287},"source":"function reset() {\n    this.setHTMLString('');\n    if (this.children().item() != null) this.children().item().remove();\n}","funcProperties":{"__isSmartRef__":true,"id":288},"__LivelyClassName__":"lively.Closure"},"287":{"this":{"__isSmartRef__":true,"id":59}},"288":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Mon Jun 08 2015 22:30:26 GMT-0700 (PDT)\")"},"289":{"varMapping":{"__isSmartRef__":true,"id":290},"source":"function setColor(color) {\n    this.cube.material.color.setRGB(color.r, color.g, color.b);\n}","funcProperties":{"__isSmartRef__":true,"id":291},"__LivelyClassName__":"lively.Closure"},"290":{"this":{"__isSmartRef__":true,"id":59}},"291":{"user":"Alexia","__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Thu Jun 11 2015 20:02:08 GMT-0700 (PDT)\")"},"292":{"source":{"__isSmartRef__":true,"id":42},"target":{"__isSmartRef__":true,"id":59}},"293":{"morph":{"__isSmartRef__":true,"id":42},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"294":{"_BorderWidth":1,"_ClipMode":"visible","_BorderRadius":0,"_Opacity":1,"_BorderStyle":"solid","__serializedExpressions__":["position","_Extent","_BorderColor","_Fill","_Padding"],"_AppearanceStylingMode":false,"_BorderStylingMode":true,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(207.0,156.0)","_BorderColor":"Color.rgb(95,94,95)","_Fill":"Color.rgb(255,255,255)","_Padding":"lively.rect(0,0,0,0)"},"295":{"partsSpaceName":"PartsBin/MDM/","comment":"3D cube with color changer","migrationLevel":9,"partName":"3DwColor","changes":[{"__isSmartRef__":true,"id":296},{"__isSmartRef__":true,"id":297},{"__isSmartRef__":true,"id":298},{"__isSmartRef__":true,"id":299},{"__isSmartRef__":true,"id":300},{"__isSmartRef__":true,"id":301},{"__isSmartRef__":true,"id":302},{"__isSmartRef__":true,"id":303},{"__isSmartRef__":true,"id":304},{"__isSmartRef__":true,"id":305},{"__isSmartRef__":true,"id":306},{"__isSmartRef__":true,"id":307},{"__isSmartRef__":true,"id":308},{"__isSmartRef__":true,"id":309},{"__isSmartRef__":true,"id":310},{"__isSmartRef__":true,"id":311},{"__isSmartRef__":true,"id":312},{"__isSmartRef__":true,"id":313},{"__isSmartRef__":true,"id":314},{"__isSmartRef__":true,"id":315},{"__isSmartRef__":true,"id":316},{"__isSmartRef__":true,"id":317},{"__isSmartRef__":true,"id":318}],"__serializedExpressions__":["lastModifiedDate"],"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo","__SourceModuleName__":"Global.lively.PartsBin","lastModifiedDate":"new Date(\"Thu Jun 11 2015 20:28:34 GMT-0700 (PDT)\")"},"296":{"author":"jenslincke","message":"no comment","id":"ADFBF069-513C-4DE6-95A9-8AD4985C6508","__serializedExpressions__":["date"],"date":"new Date(\"Tue Feb 04 2014 01:23:53 GMT-0800 (PST)\")"},"297":{"author":"robertkrahn","message":"no comment","id":"A452871F-4EB9-45D1-94B8-6065CBA7B8FD","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jul 29 2013 23:20:51 GMT-0700 (PDT)\")"},"298":{"author":"SAPLivelyScreen","message":"no comment","id":"7A44D8CA-6D5F-42A3-A4B4-4D7F51EECA52","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 18 2013 11:49:27 GMT-0700 (PDT)\")"},"299":{"author":"SAPLivelyScreen","message":"no comment","id":"EF145198-0649-41BD-A92E-521D98FEC49D","__serializedExpressions__":["date"],"date":"new Date(\"Wed May 29 2013 15:36:50 GMT-0700 (PDT)\")"},"300":{"author":"jenslincke","message":"added legend","id":"7ADA3049-56C1-4D32-874B-F664A79DDB20","__serializedExpressions__":["date"],"date":"new Date(\"Fri Jan 18 2013 07:47:05 GMT-0800 (PST)\")"},"301":{"author":"jenslincke","message":"no comment","id":"A4B86A7E-A398-4C29-BEE0-4AA045ABABD2","__serializedExpressions__":["date"],"date":"new Date(\"Fri Jan 18 2013 07:42:31 GMT-0800 (PST)\")"},"302":{"author":"jenslincke","message":"I want my blue rectangle back!","id":"5AA9291A-869F-4D36-8095-4721B5A5B205","__serializedExpressions__":["date"],"date":"new Date(\"Thu Nov 22 2012 01:35:51 GMT-0800 (PST)\")"},"303":{"author":"bgnauk","message":"no comment","id":"0124E570-50B7-4CE3-83A1-6E7BA89B5CD8","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 18 2012 10:35:08 GMT-0700 (PDT)\")"},"304":{"author":"undefined","message":"suddenly, the rectangle became a CarDemo","id":"B5083AA8-9BAE-48DD-A6B4-FD7DB3998350","__serializedExpressions__":["date"],"date":"new Date(\"Mon Apr 09 2012 04:42:07 GMT-0700 (PDT)\")"},"305":{"author":"undefined","message":"css transitions","id":"1004E0FC-D96B-4F40-B3E0-F514A3FCFFD7","__serializedExpressions__":["date"],"date":"new Date(\"Wed Mar 14 2012 02:42:26 GMT-0700 (PDT)\")"},"306":{"author":"fbo","message":"","id":"BD1C654D-9100-4B66-BC62-B15FF2498B2B","__serializedExpressions__":["date"],"date":"new Date(\"Fri Feb 24 2012 17:59:09 GMT-0800 (PST)\")"},"307":{"author":"undefined","message":"sorry","id":"44B56D2E-9B59-4C67-A305-49A6E10E66C2","__serializedExpressions__":["date"],"date":"new Date(\"Wed Mar 14 2012 02:53:45 GMT-0700 (PDT)\")"},"308":{"author":"undefined","message":"whoopsie","id":"CEA5DCD5-2DB7-40AD-A776-262A7A0666FC","__serializedExpressions__":["date"],"date":"new Date(\"Thu May 03 2012 06:51:30 GMT-0700 (PDT)\")"},"309":{"author":"undefined","message":"whoopsie","id":"3F17A2D2-3C24-424B-B0FA-E43112267D23","__serializedExpressions__":["date"],"date":"new Date(\"Thu May 03 2012 06:51:36 GMT-0700 (PDT)\")"},"310":{"author":"jenslincke","message":"no comment","id":"AEB2F41B-2C88-4BBA-8875-93CD17CBA1C8","__serializedExpressions__":["date"],"date":"new Date(\"Wed Jan 23 2013 03:57:18 GMT-0800 (PST)\")"},"311":{"author":"robertkrahn","message":"no comment","id":"67FD74CD-7AE4-4050-ADC7-4DF73804258D","__serializedExpressions__":["date"],"date":"new Date(\"Thu May 30 2013 00:18:06 GMT-0700 (PDT)\")"},"312":{"author":"robertkrahn","message":"no comment","id":"FBBB9C99-B61C-4D5F-8750-6E2987DF0C9C","__serializedExpressions__":["date"],"date":"new Date(\"Thu Jun 20 2013 15:16:24 GMT-0700 (PDT)\")"},"313":{"author":"jenslincke","message":"no comment","id":"ECD12BFF-E872-4918-8341-C6571E72F36D","__serializedExpressions__":["date"],"date":"new Date(\"Tue Feb 04 2014 01:24:27 GMT-0800 (PST)\")"},"314":{"author":"lauritz","message":"dropping enabled for the blue rectangle","id":"81D350CB-D926-491F-8FF3-A6C9C831BDF2","__serializedExpressions__":["date"],"date":"new Date(\"Wed Mar 12 2014 07:00:28 GMT-0700 (PDT)\")"},"315":{"author":"robertkrahn","message":"no comment","id":"5AF36E70-7428-4762-9423-D7160E3DCBDC","__serializedExpressions__":["date"],"date":"new Date(\"Sat Nov 08 2014 15:34:45 GMT-0800 (PST)\")"},"316":{"author":"mroeder","message":"Changed color to orange","id":"2AEA8F36-4991-40B2-91FE-63CAF9D2FE52","__serializedExpressions__":["date"],"date":"new Date(\"Tue May 12 2015 14:07:51 GMT-0700 (PDT)\")"},"317":{"__serializedExpressions__":["date"],"author":"Alexia","message":"no comment","id":"682CCC03-9238-4086-A919-A951C49C51A9","date":"new Date(\"Thu Jun 11 2015 20:28:33 GMT-0700 (PDT)\")"},"318":{"__serializedExpressions__":["date"],"author":"Alexia","message":"no comment","id":"16DD3964-EA03-4094-BB0B-4BAA40D02CC7","date":"new Date(\"Thu Jun 11 2015 20:30:20 GMT-0700 (PDT)\")"},"319":{"morph":{"__isSmartRef__":true,"id":41},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"320":{"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":321}},"321":{"test01IsMorph":{"__isSmartRef__":true,"id":322}},"322":{"varMapping":{"__isSmartRef__":true,"id":323},"source":"function test01IsMorph(aPart) {\n    this.assert(aPart.isMorph, 'rectangle should be a morph');\n}","funcProperties":{"__isSmartRef__":true,"id":324},"__LivelyClassName__":"lively.Closure"},"323":{"this":{"__isSmartRef__":true,"id":320}},"324":{},"325":{"resizeWidth":true,"resizeHeight":true},"326":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":327},"_ClipMode":"visible","derivationIds":[],"id":"4D42D471-0E2C-4362-B0BE-E0134BC8DEC7","droppingEnabled":true,"halosEnabled":true,"__serializedExpressions__":["_Position"],"type":"corner","_StyleClassNames":["Morph","Box","ReframeHandle","reframe-handle corner"],"layout":{"__isSmartRef__":true,"id":328},"owner":{"__isSmartRef__":true,"id":0},"eventHandler":{"__isSmartRef__":true,"id":329},"__LivelyClassName__":"lively.morphic.ReframeHandle","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(199.0,169.0)"},"327":{"__serializedExpressions__":["_Position","_Extent","_Padding"],"_BorderWidth":0,"_BorderColor":null,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(14.0,14.0)","_Padding":"lively.rect(0,0,0,0)"},"328":{"moveVertical":true,"moveHorizontal":true},"329":{"morph":{"__isSmartRef__":true,"id":326},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"330":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":331},"_ClipMode":"visible","derivationIds":[],"id":"0C2D1B26-9FEE-4A93-9576-DFB8CAB5E3EB","droppingEnabled":true,"halosEnabled":true,"__serializedExpressions__":["_Position"],"type":"bottom","_StyleClassNames":["Morph","Box","ReframeHandle","reframe-handle bottom"],"layout":{"__isSmartRef__":true,"id":332},"owner":{"__isSmartRef__":true,"id":0},"eventHandler":{"__isSmartRef__":true,"id":333},"__LivelyClassName__":"lively.morphic.ReframeHandle","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(0.0,180.0)"},"331":{"__serializedExpressions__":["_Position","_Extent","_Padding"],"_BorderWidth":0,"_BorderColor":null,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(199.0,3.0)","_Padding":"lively.rect(0,0,0,0)"},"332":{"moveVertical":true},"333":{"morph":{"__isSmartRef__":true,"id":330},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"334":{"submorphs":[],"scripts":[],"shape":{"__isSmartRef__":true,"id":335},"_ClipMode":"visible","derivationIds":[],"id":"A97CDBB4-6BD9-46B1-BF1E-2A7F4B2C353F","droppingEnabled":true,"halosEnabled":true,"__serializedExpressions__":["_Position"],"type":"right","_StyleClassNames":["Morph","Box","ReframeHandle","reframe-handle right"],"layout":{"__isSmartRef__":true,"id":336},"owner":{"__isSmartRef__":true,"id":0},"eventHandler":{"__isSmartRef__":true,"id":337},"__LivelyClassName__":"lively.morphic.ReframeHandle","__SourceModuleName__":"Global.lively.morphic.Widgets","_Position":"lively.pt(210.0,0.0)"},"335":{"__serializedExpressions__":["_Position","_Extent","_Padding"],"_BorderWidth":0,"_BorderColor":null,"_Fill":null,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(3.0,169.0)","_Padding":"lively.rect(0,0,0,0)"},"336":{"moveHorizontal":true},"337":{"morph":{"__isSmartRef__":true,"id":334},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"338":{"__serializedExpressions__":["_Padding","_Extent"],"_BorderWidth":0,"_BorderColor":null,"_Fill":null,"_StrokeOpacity":false,"_BorderRadius":false,"_AppearanceStylingMode":true,"_BorderStylingMode":true,"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Padding":"lively.rect(0,0,0,0)","_Extent":"lively.pt(213.0,183.0)"},"339":{"adjustForNewBounds":true},"340":{"morph":{"__isSmartRef__":true,"id":0},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"isSimplifiedRegistry":true}}